<%args>
	$upload
</%args>
<%init>

	my $limit = $Tab::upload_limit;
	$limit = "15360" unless $limit;

	if ($upload->size > $limit) {

		my $mb_limit = sprintf("%.1f", $limit / 1024);
		my $mb_size = sprintf("%.1f", $upload->size / 1024);

		my $message = " Uploaded file (".$upload->filename." &mdash; ".$mb_size." MB) is ";
		$message .= " larger than allowed limit of ".$mb_limit." MB <br /><br />";
		$message .= " Please compress the file, or scan it at a lower resultion, ";
		$message .= " or try a different format <br /><br />";
		$message .= " Hit the back button to try again with a smaller file. ";

		$m->comp("/funclib/abort.mas", message => $message);

	}

	return;

</%init>
