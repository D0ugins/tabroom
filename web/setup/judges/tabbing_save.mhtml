<%args>
	$tourn
	$category_id
	$no_back_to_back           => 0
	$ballot_entry_school_codes => 0
	$judge_event_twice         => 0
	$track_diversity           => 0
	$show_diversity            => 0
	$allow_school_panels       => 0
	$allow_region_panels       => 0
	$conflict_region_judges    => 0
	$judge_randomize           => 0
	$audit_method              => 0
	$preference                => 0
	$default_mjp               => 0
	$mutuality                 => 0
	$panel_mutuality           => 0
	$round_burn_avoid          => 0
	$diverse_judge_weight      => 0
	$mjp_prefer_hireds         => 0
	$auto_conflict_hires       => 0
	$sucktastic_judge_weight   => 0
	$judge_sheet_notice        => 0
	$diversity_notice          => 0
	$ballot_entry_codes        => 0
	$ballot_entry_names        => 0
	$ballot_entry_first_names  => 0
	$ballot_entry_titles       => 0
	$ballot_times              => 0
	$ballot_school_codes       => 0
	$ballot_school_names       => 0
	$ballot_judge_phones       => 0
</%args>
<%init>

	my $category = Tab::Category->retrieve($category_id);

	$category->setting("no_back_to_back", $no_back_to_back);
	$category->setting("ballot_entry_school_codes", $ballot_entry_school_codes);
	$category->setting("judge_event_twice", $judge_event_twice);
	$category->setting("track_diversity", $track_diversity);
	$category->setting("show_diversity", $show_diversity);

	$category->setting("allow_school_panels", $allow_school_panels);
	$category->setting("allow_region_panels", $allow_region_panels);
	$category->setting("conflict_region_judges", $conflict_region_judges);

	$category->setting("judge_randomize", $judge_randomize);
	$category->setting("audit_method", $audit_method);
	$category->setting("preference", $preference);
	$category->setting("default_mjp", $default_mjp);
	$category->setting("mjp_prefer_hireds", $mjp_prefer_hireds);
	$category->setting("auto_conflict_hires", $auto_conflict_hires);
	$category->setting("mutuality", $mutuality);
	$category->setting("panel_mutuality", $panel_mutuality);
	$category->setting("round_burn_avoid", $round_burn_avoid);
	$category->setting("diverse_judge_weight", $diverse_judge_weight);
	$category->setting("sucktastic_judge_weight", $sucktastic_judge_weight);
	$category->setting("judge_sheet_notice", $judge_sheet_notice);
	$category->setting("diversity_notice", $diversity_notice);

	$category->setting("ballot_entry_codes", $ballot_entry_codes);
	$category->setting("ballot_entry_names", $ballot_entry_names);
	$category->setting("ballot_entry_first_names", $ballot_entry_first_names);
	$category->setting("ballot_entry_titles", $ballot_entry_titles);
	$category->setting("ballot_times", $ballot_times);
	$category->setting("ballot_school_codes", $ballot_school_codes);
	$category->setting("ballot_school_names", $ballot_school_names);
	$category->setting("ballot_judge_phones", $ballot_judge_phones);

	$category->setting("preference", "-1") if $preference == 0;
	$category->setting("default_mjp", "-1") if $default_mjp == 0;
	$category->setting("mjp_prefer_hireds", "-1") if $mjp_prefer_hireds == 0;
	$category->setting("mutuality", "-1") if $mutuality == 0;
	$category->setting("panel_mutuality", "-1") if $panel_mutuality == 0;
	$category->setting("round_burn_avoid", "-1") if $round_burn_avoid == 0;
	$category->setting("diverse_judge_weight", "-1") if $diverse_judge_weight == 0;
	$category->setting("sucktastic_judge_weight", "-1") if $sucktastic_judge_weight == 0;

	my $msg = "Pairing and tabbing settings saved";

	$m->redirect("tabbing.mhtml?category_id=$category_id&msg=$msg");

</%init>
