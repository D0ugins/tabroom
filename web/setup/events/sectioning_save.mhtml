<%args>
	$tourn
	$event_id                     => undef
	$round_robin                  => 0
	$region_constraints           => 0
	$region_avoid                 => 0
	$speaker_priority_first       => 0
	$region_judge_forbid          => 0
	$break_point                  => 0
	$max_pref                     => 0
	$max_nobreak_pref             => 0
	$allow_judge_own              => 0
	$no_first_years               => 0
	$panel_labels                 => 0
	$schem_designation            => 0
	$schem_orientation            => 0
	$separate_codes               => 0
	$min_panel_size               => 0
	$max_panel_size               => 0
	$default_panel_size           => 0
	$elim_method                  => 0
	$school_percent_limit         => 0
	$allow_repeat_judging         => 0
	$allow_repeat_elims           => 0
	$disallow_repeat_drop         => 0
	$allow_repeat_prelim_side     => 0
	$avoid_school_hits            => 0
	$hybrids_can_hit              => 0
	$no_side_constraints          => 0
	$powermatch                   => 0
	$bracket_by_ballots           => 0
	$bracket_rooms                => 0
	$snake_sides_huge_schools     => 0
	$school_debates_self          => 0
	$pullup_method                => 0
	$pullup_minimize              => 0
	$pullup_repeat                => 0
	$prevent_hitting_pullup_twice => 0
	$seed_presets                 => 0
	$best_judges_highest_seed     => 0
	$wsdc_multiple_sites          => 0
	$wsdc_cap_repel               => 0
	$live_updates                 => 0
	$autopublish_results          => 0
</%args>
<%init>

	my $tz = $tourn->tz;
	$tz = "UTC" unless $tz;

	my $event = Tab::Event->retrieve($event_id);
	$m->abort unless $event;

	$event->setting("round_robin", $round_robin);
	$event->setting("region_constraints", $region_constraints);
	$event->setting("region_avoid", $region_avoid);
	$event->setting("speaker_priority_first", $speaker_priority_first);
	$event->setting("region_judge_forbid", $region_judge_forbid);

	$event->setting("seed_presets", $seed_presets);

	$event->setting("powermatch", $powermatch);
	$event->setting("bracket_by_ballots", $bracket_by_ballots);
	$event->setting("bracket_rooms", $bracket_rooms);

	$event->setting("pullup_method", $pullup_method);
	$event->setting("pullup_repeat", $pullup_repeat);
	$event->setting("snake_sides_huge_schools", $snake_sides_huge_schools);
	$event->setting("prevent_hitting_pullup_twice", $prevent_hitting_pullup_twice);
	$event->setting("pullup_minimize", $pullup_minimize);

	$event->setting("break_point", $break_point);
	$event->setting("best_judges_highest_seed", $best_judges_highest_seed);

	$event->setting("max_pref", $max_pref);
	$event->setting("max_nobreak_pref", $max_nobreak_pref);

	$event->setting("school_debates_self", $school_debates_self);
	$event->setting("no_side_constraints", $no_side_constraints);

	$event->setting("wsdc_multiple_sites", $wsdc_multiple_sites);
	$event->setting("wsdc_cap_repel", $wsdc_cap_repel);

	$event->setting("allow_judge_own", $allow_judge_own);
	$event->setting("no_first_years", $no_first_years);
	$event->setting("panel_labels", $panel_labels);
	$event->setting("schem_orientation", $schem_orientation);
	$event->setting("schem_designation", $schem_designation);

	$event->setting("live_updates", $live_updates);
	$event->setting("allow_judge_own", $allow_judge_own);
	$event->setting("no_first_years", $no_first_years);

	$event->setting("separate_codes", $separate_codes);

	$event->setting("allow_repeat_judging", $allow_repeat_judging);
	$event->setting("allow_repeat_elims", $allow_repeat_elims);
	$event->setting("disallow_repeat_drop", $disallow_repeat_drop);
	$event->setting("allow_repeat_prelim_side", $allow_repeat_prelim_side);
	$event->setting("avoid_school_hits", $avoid_school_hits);
	$event->setting("hybrids_can_hit", $hybrids_can_hit);

	$event->setting("min_panel_size", $min_panel_size);
	$event->setting("max_panel_size", $max_panel_size);
	$event->setting("default_panel_size", $default_panel_size);
	$event->setting("elim_method", $elim_method);
	$event->setting("school_percent_limit", $school_percent_limit);

	$event->setting("autopublish_results", $autopublish_results);

	my $msg = "Pairing settings saved";
	
	$m->redirect("sectioning.mhtml?event_id=".$event->id."&msg=$msg");
		
</%init>
