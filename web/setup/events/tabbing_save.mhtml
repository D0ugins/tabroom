<%args>
	$tourn
	$event_id             => undef
	$point_increments     => "whole"
	$team_points          => 0
	$no_lpw               => 0
	$point_ties           => 0
	$allow_lowpoints      => 0
	$wsdc_subtotal_ballot => 0
	$min_points           => 1
	$max_points           => 100
	$min_strategy_points  => undef
	$max_strategy_points  => undef
	$min_style_points     => undef
	$max_style_points     => undef
	$min_content_points   => undef
	$max_content_points   => undef
	$min_poi_points       => undef
	$max_poi_points       => undef
	$online_ballots       => 0
	$min_ob_points        => 0
	$max_ob_points        => 0
	$rfd_plz              => 0
	$comments_plz         => 0
	$points_later         => 0
	$parli_ballot         => 0
	$truncate_fill        => 0
	$speaker_tbset        => undef
	$speaker_max_scores   => undef
	$speaker_min_speeches => undef
	$show_averages        => 0
	$mavericks            => "nothing"
	$top_novice           => "none"
	$honorable_mentions   => 0
	$omit_sweeps          => 0
	$include_wsdc_reply   => 0
	$wsdc_bye_win_average => 0
</%args>
<%init>

	my $tz = $tourn->tz;
	$tz = "UTC" unless $tz;

	my $event = Tab::Event->retrieve($event_id);
	$m->abort unless $event;

	$event->setting("speaker_tbset", $speaker_tbset);
	$event->setting("speaker_max_scores", $speaker_max_scores);
	$event->setting("speaker_min_speeches", $speaker_min_speeches);
	$event->setting("online_ballots", $online_ballots);

	$event->setting("min_points", $min_points);
	$event->setting("max_points", $max_points);
	$event->setting("min_ob_points", $min_ob_points);
	$event->setting("max_ob_points", $max_ob_points);

	$event->setting("min_content_points", $min_content_points);
	$event->setting("max_content_points", $max_content_points);
	$event->setting("min_style_points", $min_style_points);
	$event->setting("max_style_points", $max_style_points);
	$event->setting("min_strategy_points", $min_strategy_points);
	$event->setting("max_strategy_points", $max_strategy_points);
	$event->setting("min_poi_points", $min_poi_points);
	$event->setting("max_poi_points", $max_poi_points);
	$event->setting("wsdc_subtotal_ballot", $wsdc_subtotal_ballot);
	$event->setting("include_wsdc_reply", $include_wsdc_reply);
	$event->setting("wsdc_bye_win_average", $wsdc_bye_win_average);

	$event->setting("rfd_plz", $rfd_plz);
	$event->setting("comments_plz", $comments_plz);
	$event->setting("point_increments", $point_increments);
	$event->setting("no_lpw", $no_lpw);
	$event->setting("allow_lowpoints", $allow_lowpoints);
	$event->setting("point_ties", $point_ties);
	$event->setting("show_averages", $show_averages);

	$event->setting("team_points", $team_points);

	$event->setting("parli_ballot", $parli_ballot);
	$event->setting("points_later", $points_later);
	$event->setting("truncate_fill", $truncate_fill);

	$event->setting("top_novice", $top_novice);
	$event->setting("mavericks", $mavericks);
	$event->setting("honorable_mentions", $honorable_mentions);
	$event->setting("omit_sweeps", $omit_sweeps);

	my $msg = "Tabulation settings saved";
	
	$m->redirect("tabbing.mhtml?event_id=".$event->id."&msg=$msg");
		
</%init>
