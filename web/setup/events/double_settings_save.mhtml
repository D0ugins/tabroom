<%args>
	$tourn
	$double_entry => undef
	$double_max   => undef
</%args>
<%init>

	$tourn->setting("double_entry", $double_entry);
	$tourn->setting("double_max", $double_max);

	foreach my $pattern ($tourn->patterns) { 

		$pattern->name($ARGS{"name_".$pattern->id});
		$pattern->type($ARGS{$pattern->id});
		$pattern->max($ARGS{"max_".$pattern->id});
		$pattern->exclude($ARGS{$pattern->id."_exclude"});
		$pattern->update;

	}

	my $msg = "Event double-entry group settings saved";

	$m->redirect("/setup/events/double_entry.mhtml?msg=$msg");

</%init>
