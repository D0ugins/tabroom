<%args>
	$tourn
	$tourn_settings
	$person
	$event_id  => undef
	$whoami    => undef
	$add       => undef
	$districts => undef
	$perms     => undef
</%args>
<%init>

	my $event = Tab::Event->retrieve($event_id) if $event_id;

	my $base_url = $whoami;
	$base_url = "edit" if $whoami eq "double";

	undef $districts if $person->site_admin;

</%init>

	<div class="sidenote">
%		unless ($perms->{"details"}) {

			<h4>
				Batch Changes
			</h4>

%			if ($person->site_admin || (not defined $districts)) {
				<a
					class="<% $add ? "dk" : "" %>yellow full"
					href="edit.mhtml?add=yes"
				>
					Add New Event
				</a>
%			}

			<a
				class="<% ($whoami eq "recode") ? "dkblue full" : "blue full" %>"
				href="mass_recode.mhtml"
			>
				Speaker Codes
			</a>

			<a
				class="<% ($whoami eq "double") ? "dkblue full" : "blue full" %>"
				href="double_entry.mhtml"
			>
				Patterns &amp; Double Entry Limits
			</a>
%		}

		<& "events.mas",
			person         => $person,
			perms          => $perms,
			tourn          => $tourn,
			tourn_settings => $tourn_settings,
			whoami         => $base_url,
			event_id       => $event_id
		&>

%		if ($person->site_admin) {

			<a
				class="dkred full"
				href="dedupe_events.mhtml"
			>Deduplicate Events</a>
%		}

	</div>


