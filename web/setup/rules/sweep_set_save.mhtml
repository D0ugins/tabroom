<%args>
	$tourn
	$sweep_set_id => undef
	$name   => undef
</%args>
<%init>

	my $set;
	my $msg;

	if ($sweep_set_id) {

		$set = Tab::SweepSet->retrieve($sweep_set_id);
		$set->name($name);
		$set->update;

		$msg = "Set ".$name." saved";

	}  else {

		$set = Tab::SweepSet->create({
			tourn => $tourn->id,
			name => $name
		});

		$msg = "Set ".$name." created";

	}

	$set->rule("multiplier", $ARGS{"multiplier"});
	$set->rule("exclude_breakouts", $ARGS{"exclude_breakouts"});
	$set->rule("entries", $ARGS{"entries"});
	$set->rule("event_entries", $ARGS{"event_entries"});
	$set->rule("events", $ARGS{"events"});
	$set->rule("wildcards", $ARGS{"wildcards"});
	$set->rule("print_limit", $ARGS{"print_limit"});
	$set->rule("novice_only", $ARGS{"novice_only"});
	$set->rule("one_per_person", $ARGS{"one_per_person"});
	$set->rule("by_person", $ARGS{"by_person"});
	$set->rule("max_entry_persons", $ARGS{"max_entry_persons"});

	Tab::debuglog("Novice only is ".$ARGS{"novice_only"});

	$m->redirect("sweeps.mhtml?set_id=".$set->id."&msg=$msg");

</%init>

