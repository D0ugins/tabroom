<%args>
	$tiebreak_id
</%args>
<%init>

	my $tiebreak = Tab::Tiebreak->retrieve($tiebreak_id);

	my $msg = "Tiebreak ".$tiebreak->name." deleted" if $tiebreak;

	my $err = "Tiebreaker did not exist, did you already delete it?" unless $tiebreak;

	my $tiebreak_set_id = $tiebreak->tiebreak_set->id if $tiebreak;



	# I learned this was necessary the REALLY FRIGGIN HARD WAY.  -- CLP

	foreach my $round ($tiebreak->rounds) { 

		$round->tiebreak_set("");
		$round->update;

	}

	$tiebreak->delete if $tiebreak;

    $m->redirect("tiebreaks.mhtml?tiebreak_set_id=$tiebreak_set_id&msg=$msg&err=$err");

</%init>


