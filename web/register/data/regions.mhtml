<%args>
	$tourn
	$tourn_settings
	$person
</%args>
<%init>

	my @regions = $tourn->regions;

	@regions = sort {$a->code cmp $b->code} @regions;
	@regions = sort {length($a->code) cmp length($b->code)} @regions;

</%init>

	<& "menu.mas",
		tourn          => $tourn,
		tourn_settings => $tourn_settings,
		person         => $person,
		whoami         => "regions"
	&>

	<div class="main">

		<span class="twothirds">
			<h2>Edit Tournament Regions</h2>
		</span>
		<span 
			class="third"
			id="regions_buttonarea"
		>
		</span>

		<form action="regions_save.mhtml">

		<& "/funclib/tablesorter.mas", table => "regions" &>

		<table id = "regions">

			<thead>
		
			<tr class="yellow">
			
				<th class="smaly2lish"> 
					Region name
				</th>

				<th class="smallish"> 
					Region code
				</th>
				
			</tr>

			</thead>
			<tbody>

%			foreach my $region (@regions) { 

				<tr class="row">

					<td>
						<input 
							type  = "text"
							name  = "name_<% $region->id %>"
							size  = "32"
							value = "<% $region->name %>"
						>
					</td>

					<td>
						<input 
							type  = "text"
							name  = "code_<% $region->id %>"
							size  = "8"
							value = "<% $region->code %>"
						>
					</td>

				</tr>
%			}

			</tbody>

			<tr class="row">

				<td>
					<input 
						type        = "text"
						class       = "starthere"
						name        = "name_new"
						size        = "32"
						placeholder = "New region name"
					>
				</td>

				<td>
					<input 
						type        = "text"
						name        = "code_new"
						size        = "8"
						placeholder = "New code"
					>
				</td>

			</tr>

			<tr class="libl">

				<td colspan="2" class="rightalign">
					<input 
						type  = "submit"
						value = "Save regions"
					>
					</form> 
				</td>
			</tr>

		</table>

	</div>

