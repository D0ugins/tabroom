<%args>
	$school
	$category_id => undef
	$judge_id    => undef
</%args>
<%init>

	my $judge = Tab::Judge->retrieve($judge_id) if $judge_id;

	my $category;

	if ($judge) { 
		$category = $judge->category();
	} elsif ($category_id) { 
		$category = Tab::Category->retrieve($category_id);
	}

	unless ($category) { 
		my $err = "Something went wrong: no valid judge or judge category sent?";
		$m->redirect("judges.mhtml?school_id=".$school->id."&err=$err");
	}

	unless ($judge->school->id == $school->id) { 
		my $err = "That judge does not belong to your school.";
		$m->redirect("judges.mhtml?school_id=".$school->id."&err=$err");
	}


</%init>
