<%args>
	$student_id
	$chapter_id
	$tourn_id
	$honor
</%args>
<%init>

	$honor =~ s/\s+$//;
	$student_id =~ s/[\D_]//g;
	$chapter_id =~ s/[\D_]//g;

	print "tourn=".$tourn_id."<br>";

	# ONE: check and make sure there is an ndt_bid field for the tournament in
	# result_set; add one if not

	my $result_sets = Tab::ResultSet->search(
		tourn => $tourn_id,
		label => 'ndt_honors'
	)->first;

	unless ($result_set) {

		$result_set = Tab::ResultSet->create({
			tourn     => $tourn_id,
			published => 1,
			label     => 'ndt_honors'
		});
	}

	#TWO: store the honor in result

	my $result = Tab::Result->create({
		student    => $student_id,
		result_set => $result_set->id,
		honor      => $honor
	});

	#THREE: bail

	$m->redirect("ndt_bid_honors.mhtml?student_id=$student_id&chapter_id=$chapter_id");

</%init>
