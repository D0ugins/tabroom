<%args>
	$person
	$session
	$judge_id => undef
</%args>
<%init>

	my $judge = Tab::Judge->retrieve($judge_id);

	unless ($judge && $judge->person && $judge->person->id == $person->id) {
		$m->comp("/funclib/abort.mas",
			message => "Judge with id $judge_id is not linked to your account"
		);
	}

	unless ($judge->category->setting("paradigm_form")) {
		$m->comp("/funclib/abort.mas",
			message => "Judge category does not ask for paradigms"
		);
	}

	my $category = $judge->category;
	my $tourn = $category->tourn;

</%init>

	<&
		"/user/menu.mas",
		person => $person,
	&>

	<div class="main">

		<div class="full padvert borderbottom nospace">

			<span class="fivesixths nospace">
				<h2 class="normalweight padless marno">
					<% $tourn->start->year %>
					<% $tourn->name %>
				</h2>
			</span>

			<span class="sixth rightalign nospace">
				<img
					src   = "<% $Tab::s3_url %>/<% $tourn->id."/".$tourn->setting("logo") %>"
					alt   = ""
					style = "max-width: 128px; max-height: 128px;"
				/>
			</span>

		</div>

%		my $tag = $category->setting("paradigm_form");

		<div class="full oddrow bordertop martopmore">

			<form
				action = "paradigm_form_save.mhtml"
				method = "post"
			>
				<input
					type  = "hidden"
					name  = "judge_id"
					value = "<% $judge->id %>"
				>

				<input
					type  = "hidden"
					name  = "tag"
					value = "<% $tag %>"
				>

				<input
					type  = "hidden"
					name  = "saveme"
					value = "1"
				>

				<&
					"/funclib/questionnaire.mas",
					judge => $judge,
					tag   => $tag
				&>

				<span class="libl full marno rightalign">
					<input
						type  = "submit"
						value = "Save Answers"
					>
				</span>
			</form>
		</div>

	</div>
