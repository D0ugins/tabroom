<%args>
	$tourn_id
	$person
	$certain => undef
</%args>
<%init>

	my $tourn = Tab::Tourn->retrieve($tourn_id);
	$m->abort unless $tourn;

	if ( $certain eq "I am more certain than Brian Manuel" ) { 


		my $msg = "Tournament ".$tourn->name." has been completely and utterly ";
		$msg .= "wiped from the face of the earth.  I hope you meant to do that ";
		$msg .= "because if you did not, it\'s your funeral.";

		$tourn->delete;

		$m->redirect("/user/admin/tourns.mhtml?msg=$msg");

	}

</%init>

	<div 
		class = "blankfull"
		style = "text-align: center; min-height: 650px;"
	>

		<&  "/funclib/warning.mas", person => $person &>

		<p class="warning"> 
			You are about to permanently delete <% $tourn->name %>.
		</p>

		<p>
			This will eliminate events, competitors, judges, fees, and all.
		</p>

		<p>
			This cannot be undone.  You can only get it back by re-entering the
			whole thing over again.
		</p>

		<p>
			Don't say I didn't warn you.  
		</p>

%	 	if ($certain) {

			<p style="color: red;">
				You did not type "I am more certain than Brian Manuel", exactly like that.  Try again!
			</p>

%	 	}

		<br>
		<br>
		
		<p>
			To proceed, type "I am more certain than Brian Manuel" in the box below:
		</p>

		<br>
		<br>

		<form 
			action = "tourn_delete.mhtml"
			method = "post"
		>

			<input 
				type  = "hidden"
				value = "<% $tourn_id %>"
				name  = "tourn_id"
			>
			
			<p class="centeralign">
				<input 
					type           = "text"
					name           = "certain"
					size           = "20"
					autocomplete   = "off"
					autocorrect    = "off"
					autocapitalize = "off"
					spellcheck     = "false"
					class          = "martop notfirst">
			</p>
			
			<p class="centeralign">
				<input  
					type  = "submit"
					value = "Delete Tournament"
				>
			</p>
		</form>


	</div>
