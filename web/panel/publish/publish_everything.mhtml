<%args>
	$tourn
	$person
	$perms
</%args>
<%init>

	my @events;

    if (${$perms}{"category_tab"} && ${$perms}{"category_tab"}->category) {

		@events = ${$perms}{"category_tab"}->category->events;

	} else {

		@events = $tourn->events;

	}

	foreach my $event (@events) {
		foreach my $round ($event->rounds) {

			$m->comp('/funclib/online_usage.mas', round => $round);

			$round->published(1);
			$round->post_results(2);
			$round->update();

			$round->setting("post_wins", 1);
			$round->setting("post_feedback", 1);
			$round->setting("post_points", 1);

			$round->setting("coach_wins", 1);
			$round->setting("coach_feedback", 1);
			$round->setting("coach_points", 1);

		}
	}

	my $msg = "All rounds events and pairings have been posted.";
	$m->redirect("index.mhtml?msg=$msg");

</%init>
