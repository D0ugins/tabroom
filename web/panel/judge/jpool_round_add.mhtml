<%args>
	$jpool_id => undef
	$round_id => undef
</%args>
<%init>
	
	my $round = Tab::Round->retrieve($round_id) if $round_id;

	my $msg;

	if ($round && $jpool_id) { 

		unless (Tab::JPoolRound->search({ round => $round->id, jpool => $jpool_id })) { 
			Tab::JPoolRound->create({
				round => $round->id,
				jpool => $jpool_id
			});

			$msg = $round->realname." will now draw from this judge pool";
		}

	}

	$m->redirect("jpool.mhtml?jpool_id=$jpool_id&category_id=".$round->event->category->id."&msg=$msg") if $round;

	$m->abort();


</%init>
