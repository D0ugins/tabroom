<%args>
	$round
	$default  => undef
</%args>
<%init>

	$m->abort unless $round;

	my %round_settings = $round->all_settings;
	my $round_type = $round->type;

	$round_type = "elim" if $round_type eq "final";

</%init>

		<ul id="tabnav">

<%perl>

		foreach my $allround ($round->event->rounds) {
		
			my $unbalanced;
			$unbalanced++ if $m->comp( "/funclib/round_unbalanced.mas", round => $allround);

			my $realname = $allround->realname;

			my $eventname = quotemeta $allround->event->name;
			my $eventabbr = quotemeta $allround->event->abbr;
			$realname =~ s/$eventname//g;
			$realname =~ s/$eventabbr//g;
			$realname =~ s/Round\ /Rd/g;
			$realname =~ s/Session\ /Sess/g;
			$realname =~ s/Doubles/Dbl/g;
			$realname =~ s/Double /Dbl/g;
			$realname =~ s/\s//g;

			my $test = $realname;
			eval { $test = $test + 0; };
			$realname = "R".$realname if $test;
			$realname = substr($realname, 0, 5);

</%perl>

			<li class="<% ($allround->id == $round->id) ? "selected" : "" %> 
				<% $unbalanced ?  "warning" : "" %>">

				<a 
					href="show.mhtml?round_id=<% $allround->id %>&default=<% $default %>"
				>
					<% $realname %>
				</a>

			</li>

%			}

		</ul>

