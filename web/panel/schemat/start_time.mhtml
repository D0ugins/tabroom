<%args>
	$tourn
	$round_id
	$starttime
</%args>
<%init>

	my $tz = $tourn->tz;
	$tz = "UTC" unless $tz;

	my $round = Tab::Round->retrieve($round_id);

	my $start_date = $round->timeslot->start->set_time_zone($tz);
	my $start;
	
	eval { 
		$start = Tab::dtme( $start_date->mdy('/'), $starttime, $tz);
	};

	my $msg;
	my $err;

	if ($start) { 

		$msg = $round->realname." start time changed to ".Tab::nicetime($start);
		$round->start_time($start);
		$round->update;

	} else { 

		$err = "Invalid time, please try again";

	}

	$m->redirect("show.mhtml?round_id=$round_id&msg=$msg&err=$err");


</%init>
