<%args>
	$tourn
	$tourn_settings
	$round_id
	$next => undef
</%args>
<%init>

	my $round = Tab::Round->retrieve($round_id);

	unless ($round) { 
		$m->comp("/funclib/abort.mas", warn => "No such round found with id $round_id");
	}

	my $event = $round->event;

	$m->print("Event type is ".$event->type);

	if ($event->type eq "debate") { 

		$m->redirect("debate.mhtml?round_id=".$round->id."&next=$next");

	} elsif ($event->type eq "congress") { 

		$m->redirect("congress.mhtml?round_id=".$round->id."&next=$next");

	} elsif ($event->type eq "speech") { 

		if ($tourn_settings->{"doubledown"}) { 
		
			$m->redirect("doubledown.mhtml?round_id=".$round->id."&next=$next");

		} else { 

			$m->redirect("california.mhtml?round_id=".$round->id."&next=$next");


		}

	}

</%init>


